title: 思路太好了，一张图片让所有浏览器未响应
id: 650
categories:
  - Others
date: 2013-05-24 10:22:57
tags:
---

# 一张图片让所有浏览器未响应

<div>

[![79086246020121126](http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/05/102328ptX.png "79086246020121126")](http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/05/102328ptX.png "79086246020121126")

你可能要问，一张图片怎么可能会导致整个浏览器无法响应呢，如果你不相信就自己来这个链接试一试吧，整个页面中真的只有一张图片哦。相信你在试过之后的确是发现了浏览器要么就是无法响应，或者是整个系统都卡住了，计算机性能好的可能会出现卡顿的情况，这个到底是为什么呢，今天我们就来讲解一下怎样利用 Gzip 创建一张冗大的 1G 的图片让浏览器未响应吧。

&nbsp;

首先补充一下知识：Gzip 是一种在网站当中常用的一种技术，他可以将网页压缩到只有原来的百分之 70% 左右。如果一个字符串“10000000000”使用压缩技术压缩之后，他就会变为“1+10*0”这样，这样字符串的长度和大小就变短了。那么，如果一个 1G 左右的图片被压缩了之后，只有 2M 多，然后发送到客户端之后再解压，客户端无法承受那么大的文件，自然就未响应了。

这个其实已经不是新鲜的东西，要让浏览器无法响应还是要几个要求的：1.图片够大、2.传送的速度够快。就像我提供的链接，因为传送的速度不是很快，所以要很久才会出现未响应的状况。

[![58357946720121126](http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/05/1023308w0.png "58357946720121126")](http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/05/1023308w0.png "58357946720121126")

我们先挑选一张不是很大 普通图片。

[![128816471120121126](http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/05/102331Kxp.png "128816471120121126")](http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/05/102331Kxp.png "128816471120121126")

&nbsp;

使用 16 进制编辑器不断在文件末尾添加 0，让他变成具有很多 0 字符的冗长的一张 1G 的图片。

[![89868126020121126](http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/05/102333Lio.png "89868126020121126")](http://7xnueu.com1.z0.glb.clouddn.com/auto_save_image/2013/05/102333Lio.png "89868126020121126")

因为文件中大部分的字符串全部都是 0，所以压缩之后冗长的 0 被压缩到只有 2M 的大小。现在我们只要将这个 Gzip 文件**以极快的速度发送到浏览器**并且解压，浏览器就会未响应了。

&nbsp;
<div id="crayon-519afed9abfd7" data-settings=" minimize scroll-mouseover">

&nbsp;
<div>
<table>
<tbody>
<tr>
<td data-settings="show"></td>
<td>
<div>

&lt;?php

header("Content-Encoding: gzip");

echo file_get_contents("img.png.gz");

?&gt;

</div></td>
</tr>
</tbody>
</table>
</div>
</div>
&nbsp;

仅仅是有压缩文件是不行的，我们还需要一个文件来告诉浏览器这个是一个压缩文件，你需要解压，一般主流的浏览器都是支持 Gzip 压缩的了，在上面的代码中，我们告诉浏览器这个是经过 Gzip 压缩的，然后加载并输出制作的压缩文件。在这里，主机输出的数据流只有压缩包的 2M，但是到了客户端浏览器，数据被解压之后就到达了 1.63G 的大小。

最后我们只需要用 img 标签在论坛或者是其他页面中插入这个页面就可以了，图片仍然是可以正常显示的，但是当数据全部加载完成，或者是数据加载超出 CPU 的负载之后，浏览器便出现了未响应的状态。

这个其实没有什么实际的用处，**也请你不要去做不应该做的事情**，要构成浏览器未响应的要求首先就是文件传送的速度够快，如果你的主机要半天才能够加载这张图片，那么浏览器也要半天才能未响应了。

[点击此处进入测试页面
](http://1.theimgrongchang.duapp.com/)

</div>